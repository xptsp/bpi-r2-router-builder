#!/bin/bash
GREEN='\033[1;32m'
BLUE='\033[1;34m'
NC='\033[0m'
netstat -peanut > /tmp/peanut

if [[ -z "$1" || "$1" == "-4" ]]; then
	echo -e "${GREEN}IPv4 Active Internet connections (servers only)${NC}"
	echo -ne "${BLUE}"
	cat /tmp/peanut | head -2 | tail -1
	echo -ne "${NC}"
	cat /tmp/peanut | grep LISTEN | grep -v "::" | sort -t":" -k2 -g
fi
[[ -z "$1" ]] && echo ""
if [[ -z "$1" || "$1" == "-6" ]]; then
	echo -e "${GREEN}IPv6 Active Internet connections (servers only)${NC}"
	echo -ne "${BLUE}"
	cat /tmp/peanut | head -2 | tail -1
	echo -ne "${NC}"
	cat /tmp/peanut | grep LISTEN | grep "::" | sort -t":" -k4 -g
fi
echo ""
rm /tmp/peanut
